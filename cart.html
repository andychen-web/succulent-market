<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>多肉市集-購物車</title>
    <link rel="icon" href="./images/favicon.ico" />
    <!-- font awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />
    <!-- custom CSS -->
    <link rel="stylesheet" href="./stylesheets/all.css" />
  </head>

  <body>
    <nav class="container navbar navbar-expand-sm navbar-light px-5">
      <div style="min-width: 230px">
        <img
          class="logo text img-fluid"
          src="./images/logo-1.png"
          style="width: 60px; height: 60px"
          alt=""
        />
        <img
          class="logo text img-fluid"
          src="./images/logo-2.png"
          style="width: 150px; height: 80px"
          alt=""
        />
      </div>

      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a href="./index.html" class="nav-link text-bold"> 首頁</a>
          </li>
          <li class="nav-item">
            <a href="./product.html" class="nav-link text-bold"> 商品 </a>
          </li>
          <li class="nav-item">
            <a href="./login.html" class="nav-link text-bold"> 登入 </a>
          </li>
          <li class="nav-item">
            <a
              href="./cart.html"
              class="nav-link active d-flex align-items-center"
            >
              <i
                class="fa-solid fa-cart-shopping"
                style="font-size: 1.3rem"
              ></i>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <!-- Main -->
    <div class="container px-0 my-5">
      <div class="row">
        <div class="col-md-8 px-5 m-lg-0">
          <div class="row bg-primary p-3 text-center"><h3>您的購物車</h3></div>
          <!-- first item -->
          <div class="row py-4 border-bottom align-items-center">
            <div
              class="col-md-2 col-6 bg-cover"
              style="
                background-image: url(./images/product-1.jpg);
                min-width: 110px;
                height: 120px;
              "
            ></div>
            <div class="col-md-6 col-6 py-3 d-md-flex">
              <div>
                多肉組合包 <br />
                NT$400
              </div>
              <div
                class="input-wrap d-inline-flex py-3 position-relative justify-content-md-end"
              >
                <div
                  class="p-2 btn btn-primary bg-white border-custom border-1"
                >
                  ─
                </div>
                <input
                  type="tel"
                  value="2"
                  class="border-custom w-25 text-center"
                />
                <div
                  class="p-2 btn btn-primary bg-white border-custom border-1"
                >
                  +
                </div>
              </div>
            </div>
            <div
              class="col-md-2 col-5 px-0 d-flex justify-content-end justify-content-md-start border-top border-bottom py-3"
            >
              <div class="d-flex flex-md-wrap flex-lg-nowrap">
                <span class="text-strong h5">NT$</span>
                <span class="price text-strong h5">800</span>
              </div>
              <div class="btn delete px-1 py-0">
                <i class="fa-solid fa-trash-can"></i>
              </div>
            </div>
          </div>
          <!-- second item 沙漠仙人掌 -->
          <div class="row py-4 border-bottom align-items-center">
            <div
              class="col-md-2 col-6 bg-cover"
              style="
                background-image: url(./images/product-2.jpg);
                min-width: 110px;
                height: 120px;
              "
            ></div>
            <div class="col-md-6 col-6 py-3 d-md-flex">
              <div>
                沙漠仙人掌 <br />
                NT$400
              </div>
              <div
                class="input-wrap d-inline-flex py-3 position-relative justify-content-md-end"
              >
                <div
                  class="p-2 btn btn-primary bg-white border-custom border-1"
                >
                  ─
                </div>
                <input
                  type="tel"
                  value="2"
                  class="border-custom w-25 text-center"
                />
                <div
                  class="p-2 btn btn-primary bg-white border-custom border-1"
                >
                  +
                </div>
              </div>
            </div>
            <div
              class="col-md-2 col-5 px-0 d-flex justify-content-end justify-content-md-start border-top border-bottom py-3"
            >
              <div class="d-flex flex-md-wrap flex-lg-nowrap">
                <span class="text-strong h5">NT$</span>
                <span class="price text-strong h5">800</span>
              </div>
              <div class="btn delete px-1 py-0">
                <i class="fa-solid fa-trash-can"></i>
              </div>
            </div>
          </div>
          <!-- third item -->
          <div class="row py-4 border-bottom align-items-center">
            <div
              class="col-md-2 col-6 bg-cover"
              style="
                background-image: url(./images/product-3.jpg);
                min-width: 110px;
                height: 120px;
              "
            ></div>
            <div class="col-md-6 col-6 py-3 d-md-flex">
              <div>
                開花仙人掌 <br />
                NT$450
              </div>
              <div
                class="input-wrap d-inline-flex py-3 position-relative justify-content-md-end"
              >
                <div
                  class="p-2 btn btn-primary bg-white border-custom border-1"
                >
                  ─
                </div>
                <input
                  type="tel"
                  value="2"
                  class="border-custom w-25 text-center"
                />
                <div
                  class="p-2 btn btn-primary bg-white border-custom border-1"
                >
                  +
                </div>
              </div>
            </div>
            <div
              class="col-md-2 col-5 px-0 d-flex justify-content-end justify-content-md-start border-top border-bottom py-3"
            >
              <div class="d-flex flex-md-wrap flex-lg-nowrap">
                <span class="text-strong h5">NT$</span>
                <span class="price text-strong h5">900</span>
              </div>
              <div class="btn delete px-1 py-0">
                <i class="fa-solid fa-trash-can"></i>
              </div>
            </div>
          </div>
        </div>
        <!-- 結帳 -->
        <div class="col-md-4 bg-secondary text-white px-0 h-50">
          <div class="p-0">
            <h4 class="border-bottom text-center py-4">訂單摘要</h4>
            <div class="d-flex justify-content-between p-2">
              <span> 小計 </span>
              <span id="subTotal"> NT$ 2500 </span>
            </div>
            <div class="d-flex justify-content-between p-2">
              <span> 運費 </span>
              <span id="shipping"> NT$ 300 </span>
            </div>
            <div class="d-flex justify-content-between p-2 h5">
              <span> 總計 </span>
              <span id="total"> NT$ 2,800 </span>
            </div>
            <div class="checkout bg-red text-center">
              <a href="./checkout-1.html" class="btn text-white w-100">結帳</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 訂閱Email -->
    <section class="py-5 bg-secondary">
      <div class="container">
        <div class="row justify-content-center">
          <!-- 上半 -->
          <div
            class="col-md-6 d-flex align-items-center justify-content-center justify-content-md-start mb-4 mb-md-0"
          >
            <img
              src="./images/ic-email.png"
              height="30"
              style="filter: invert(1)"
            />
            <span class="h4 text-white mb-0 mx-3">訂閱郵件</span>
          </div>
          <!-- 下半 -->
          <div class="col-md-6">
            <div class="custom-form d-flex">
              <input type="email" id="subscription" class="bg-primary" />
              <button
                class="d-flex align-items-center bg-red border-0"
                style="padding: 1rem 1rem"
              >
                <i class="fa-solid fa-arrow-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="bg-primary">
      <div class="container">
        <div class="row py-4 d-flex">
          <div class="col">
            <h4>聯絡資訊</h4>
            <br />
            09-8321543 <br />succulentmarket@yahoo.com
            <br />新北市植新區勝利路200號 <br />
            <img
              src="./images/icons8-facebook.svg"
              height="40px"
              alt="Facebook"
            />
            <img
              src="./images/icons8-instagram.svg"
              height="40px"
              alt="Insta"
            />
          </div>
          <div class="col d-flex justify-content-end">
            <img
              src="./images/今天是個養多肉的好日子.svg"
              height="200px"
              alt="slogan"
            />
          </div>
        </div>
      </div>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      // 加產品數量
      $(".btn:contains('+')").on("click", function () {
        const quantityInput = $(this).siblings("input");
        const currentValue = parseInt(quantityInput.val());

        quantityInput.val(currentValue + 1);

        updatePrice(quantityInput);
      });

      // 減產品數量
      $(".btn:contains('─')").on("click", function () {
        // 找到input元素和其價格
        const quantityInput = $(this).siblings("input");
        const currentValue = parseInt(quantityInput.val());

        if (currentValue > 1) {
          quantityInput.val(currentValue - 1);

          updatePrice(quantityInput);
        }
      });

      // 更新單項產品總計
      function updatePrice(input) {
        const priceElement = input.closest(".row").find(".price");

        const unitPrice = parseInt(
          input
            .closest(".row")
            .find(".col-md-6 > div:first-child")
            .text()
            .split("$")[1]
        );

        const newPrice = unitPrice * parseInt(input.val());
        priceElement.text(newPrice);
        updateSubtotal();
      }

      // 更新小計
      function updateSubtotal() {
        let subtotal = 0;
        // $(".price .text-strong.h5:last-child").each(function () {
        $(".price").each(function () {
          subtotal += parseInt($(this).text());
        });
        $("#subTotal").text(`NT$ ${subtotal}`);
        updateTotal();
      }

      // 取得運費價格
      const shippingText = $("#shipping").text().trim();
      const shipping = parseInt(
        // substring 方法提取從起始索引值（即 $ 符號之後下個索引值）到字符串末尾之間的所有字符
        shippingText.substring(shippingText.indexOf("$") + 1)
      );

      // 更新總計
      function updateTotal() {
        const subtotalText = $("#subTotal").text().trim();
        const subtotal = parseInt(
          subtotalText.substring(subtotalText.indexOf("$") + 1)
        );

        const shippingText = $("#shipping").text().trim();
        const shipping = parseInt(
          shippingText.substring(shippingText.indexOf("$") + 1)
        );

        const total = subtotal + shipping;
        $("#total").text(`NT$ ${total}`);
      }
    </script>
  </body>
</html>
<!DOCTYPE html>
